<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= folder.name %> - File Uploader</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="dashboard-header">
            <div>
                <h1>📁 <%= folder.name %></h1>
                <p><a href="/dashboard">← Back to Dashboard</a></p>
            </div>
            <div>
                <span>Welcome, <strong><%= user.username %></strong>!</span>
                <a href="/logout" class="btn btn-danger">Logout</a>
            </div>
        </header>
        
        <!-- Upload Section -->
        <section class="upload-section">
            <h3>📤 Upload File to "<%= folder.name %>"</h3>
            <form method="POST" action="/upload/<%= folder.id %>" enctype="multipart/form-data" class="upload-form">
                <div class="file-input-wrapper">
                    <input type="file" id="file" name="file" required>
                    <label for="file" class="file-label">
                        <span class="file-icon">📎</span>
                        Choose File or Drag & Drop
                    </label>
                </div>
                <button type="submit" class="btn btn-success">Upload to Folder</button>
            </form>
        </section>
        
        <!-- Files in this folder -->
        <section class="items-section">
            <h3>📄 Files in "<%= folder.name %>" (<%= files ? files.length : 0 %>)</h3>
            <% if (!files || files.length === 0) { %>
                <div class="empty-state">
                    <div class="empty-icon">📭</div>
                    <h4>No files in this folder yet</h4>
                    <p>Upload your first file using the form above!</p>
                </div>
            <% } else { %>
                <div class="items-grid">
                    <% files.forEach(file => { %>
                    <div class="item-card file-card">
                        <div class="item-icon">
                            <% if (file.mimetype.startsWith('image/')) { %>📷
                            <% } else if (file.mimetype === 'application/pdf') { %>📄
                            <% } else if (file.mimetype.includes('text')) { %>📝
                            <% } else { %>📎<% } %>
                        </div>
                        <div class="item-info">
                            <h4><%= file.filename %></h4>
                            <p>Size: <%= (file.size / 1024 / 1024).toFixed(2) %> MB</p>
                            <small>Uploaded: <%= new Date(file.uploadedAt).toLocaleDateString() %></small>
                            <div class="item-actions">
                                <a href="/download/<%= file.id %>" class="btn btn-small btn-success">Download</a>
                                <form method="POST" action="/delete/<%= file.id %>" style="display: inline;">
                                    <button type="submit" class="btn btn-small btn-danger" 
                                            onclick="return confirm('Delete this file?')">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <% }); %>
                </div>
            <% } %>
        </section>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>